syntax = "proto3";
package tx.pse.v1;

import "amino/amino.proto";
import "gogoproto/gogo.proto";
import "cosmos_proto/cosmos.proto";
import "cosmos/msg/v1/msg.proto";
import "tx/pse/v1/distribution.proto";

option go_package = "github.com/tokenize-x/tx-chain/v6/x/pse/types";

// Msg defines the Msg service.
service Msg {
  option (cosmos.msg.v1.service) = true;

  // UpdateExcludedAddresses is a governance operation to update the list of excluded addresses.
  rpc UpdateExcludedAddresses(MsgUpdateExcludedAddresses) returns (EmptyResponse);
  
  // UpdateClearingAccountMappings is a governance operation to update clearing account to recipient mappings.
  rpc UpdateClearingAccountMappings(MsgUpdateClearingAccountMappings) returns (EmptyResponse);
  
  // UpdateDistributionSchedule is a governance operation to update the distribution schedule.
  rpc UpdateDistributionSchedule(MsgUpdateDistributionSchedule) returns (EmptyResponse);
}


message MsgUpdateExcludedAddresses {
  option (cosmos.msg.v1.signer) = "authority";
  option (amino.name) = "pse/MsgUpdateExcludedAddresses";

  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  
  // addresses_to_add is the list of addresses to add to the excluded addresses list.
  repeated string addresses_to_add = 2 [
    (cosmos_proto.scalar) = "cosmos.AddressString",
    (gogoproto.moretags) = "yaml:\"addresses_to_add\""
  ];
  
  // addresses_to_remove is the list of addresses to remove from the excluded addresses list.
  repeated string addresses_to_remove = 3 [
    (cosmos_proto.scalar) = "cosmos.AddressString",
    (gogoproto.moretags) = "yaml:\"addresses_to_remove\""
  ];
}

// MsgUpdateClearingAccountMappings is a governance operation to update the clearing account to recipient mappings.
// This replaces all existing mappings with the new ones provided.
// Must include all non-Community clearing accounts (Foundation, Alliance, Partnership, Investors, Team).
// Community clearing account uses score-based distribution and should not have recipient mappings.
message MsgUpdateClearingAccountMappings {
  option (cosmos.msg.v1.signer) = "authority";
  option (amino.name) = "pse/MsgUpdateClearingAccountMappings";

  // authority is the address authorized to update mappings (governance module address).
  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  
  // mappings is the complete list of clearing account to recipient mappings.
  // This replaces all existing mappings. Must include all non-Community clearing accounts.
  repeated ClearingAccountMapping mappings = 2 [
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"mappings\""
  ];
}

// MsgUpdateDistributionSchedule is a governance operation to replace the distribution schedule.
// This completely replaces the existing distribution schedule with the new one provided.
// All existing distributions are removed and replaced with the provided distribution schedule.
message MsgUpdateDistributionSchedule {
  option (cosmos.msg.v1.signer) = "authority";
  option (amino.name) = "pse/MsgUpdateDistributionSchedule";

  // authority is the address authorized to update the schedule (governance module address).
  string authority = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  
  // schedule is the complete list of distributions that will replace the existing schedule.
  // All existing distributions are removed and replaced with this schedule.
  repeated ScheduledDistribution schedule = 2 [
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"schedule\""
  ];
}

message EmptyResponse {}
