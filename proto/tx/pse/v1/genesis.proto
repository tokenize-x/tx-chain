syntax = "proto3";
package tx.pse.v1;

import "gogoproto/gogo.proto";
import "cosmos_proto/cosmos.proto";
import "tx/pse/v1/params.proto";
import "tx/pse/v1/distribution.proto";

option go_package = "github.com/tokenize-x/tx-chain/v6/x/pse/types";

// GenesisState defines the module's genesis state.
message GenesisState {
  // params contains all gov-manageable parameters.
  Params params = 1 [(gogoproto.nullable) = false];

  // scheduled_distributions contains all scheduled distributions (both past and pending).
  // Stored as a list for genesis import/export, but will be stored as a map in state.
  // Must be sorted by timestamp in ascending order.
  // Completed allocations are removed from the map after processing.
  repeated ScheduledDistribution scheduled_distributions = 2 [
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"scheduled_distributions\""
  ];

  repeated DelegationTimeEntryExport delegation_time_entries = 3 [
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"delegation_time_entries\""
  ];

  repeated AccountScore account_scores = 4 [
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"account_scores\""
  ];

  bool skip_distributions = 5 [
    (gogoproto.moretags) = "yaml:\"skip_distributions\""
  ];
}

message DelegationTimeEntryExport {
  string validator_address = 1 [
    (cosmos_proto.scalar) = "cosmos.AddressString",
    (gogoproto.moretags) = "yaml:\"validator_address\""
  ];

  string delegator_address = 2 [
    (cosmos_proto.scalar) = "cosmos.AddressString",
    (gogoproto.moretags) = "yaml:\"delegator_address\""
  ];

  string shares = 3 [
    (cosmos_proto.scalar) = "cosmos.Dec",
    (gogoproto.customtype) = "cosmossdk.io/math.LegacyDec",
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"shares\""
  ];
  
  int64 last_changed_unix_sec = 4 [
    (gogoproto.moretags) = "yaml:\"last_changed_unix_sec\""
  ];
}

message AccountScore {
  string address = 1 [
    (cosmos_proto.scalar) = "cosmos.AddressString",
    (gogoproto.moretags) = "yaml:\"address\""
  ];
  string score = 2 [
    (cosmos_proto.scalar) = "cosmos.Int",
    (gogoproto.customtype) = "cosmossdk.io/math.Int",
    (gogoproto.nullable) = false,
    (gogoproto.moretags) = "yaml:\"score\""
  ];
}
